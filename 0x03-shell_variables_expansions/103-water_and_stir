#!/bin/bash

# Define base alphabets
water_base="water"
stir_base="stir"
bestchol_base="bestchol"

# Get values from environment
water_str="$WATER"
stir_str="$STIR"

# Function to convert a custom base string to decimal
base_to_decimal() {
    local str=$1
    local base_chars=$2
    local base_len=${#base_chars}
    local len=${#str}
    local result=0
    local i char digit

    for (( i=0; i<len; i++ )); do
        char="${str:$i:1}"
        digit=$(expr index "$base_chars" "$char" - 1)
        result=$(( result * base_len + digit ))
    done
    echo "$result"
}

# Function to convert decimal to custom base
decimal_to_base() {
    local num=$1
    local base_chars=$2
    local base_len=${#base_chars}
    local result=""

    while (( num > 0 )); do
        rem=$(( num % base_len ))
        result="${base_chars:$rem:1}$result"
        num=$(( num / base_len ))
    done

    echo "$result"
}

# Convert both to decimal
water_num=$(base_to_decimal "$water_str" "$water_base")
stir_num=$(base_to_decimal "$stir_str" "$stir_base")

# Add them
sum=$(( water_num + stir_num ))

# Convert to bestchol base and print
decimal_to_base "$sum" "$bestchol_base"
